import{l as V,n as j}from"./chunk-NQQZHCGT.js";import{g as A}from"./chunk-Q6M5HNXJ.js";import{Bb as b,Cb as a,Db as f,Eb as I,Ka as g,Kb as T,Oa as s,Pa as _,Pb as M,Rb as P,Ta as S,Xa as w,bb as k,ea as u,fa as p,hb as h,lb as y,mb as D,nb as R,nc as O,ob as E,pb as n,qb as o,rb as m,ub as x,wb as C,xb as v}from"./chunk-NO3ABJ5Q.js";var L=c=>["/checkout",c];function B(c,r){c&1&&(n(0,"h1",8),a(1,"cart is empty..."),o())}function N(c,r){if(c&1){let e=x();n(0,"div",9)(1,"div",12),m(2,"img",13),o(),n(3,"div",14)(4,"div",15)(5,"div")(6,"h3",5),a(7),o(),n(8,"h4",16),a(9),o()(),n(10,"button",17,1),C("click",function(){let i=u(e).$implicit,d=b(11),l=v();return p(l.removeItemCart(i.product._id,d))}),m(12,"i",18),a(13," Remove "),o()(),n(14,"div",19)(15,"button",20,2),C("click",function(){let i=u(e).$implicit,d=b(16),l=v();return p(l.changeCount(i.product._id,i.count-1,d))}),m(17,"i",21),o(),n(18,"div",16),a(19),o(),n(20,"button",20,3),C("click",function(){let i=u(e).$implicit,d=b(21),l=v();return p(l.changeCount(i.product._id,i.count+1,d))}),m(22,"i",22),o()()()()}if(c&2){let e=r.$implicit;s(2),h("src",e.product.imageCover,g)("alt",e.product.title),s(5),f(e.product.brand.name),s(2),f(e.product.title),s(10),f(e.count)}}var F=class c{constructor(r,e,t){this._CartService=r;this._Renderer2=e;this.toastr=t}productCartData={};ngOnInit(){this._CartService.getUserCart().subscribe({next:r=>{this.productCartData=r.data}})}removeItemCart(r,e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.removeFromCart(r).subscribe({next:t=>{this._Renderer2.removeAttribute(e,"disabled"),this.productCartData=t.data,this.toastr.success("The product has been removed."),this._CartService.cartNumber.next(t.numOfCartItems)},error:t=>{this._Renderer2.removeAttribute(e,"disabled")}})}changeCount(r,e,t){this._Renderer2.setAttribute(t,"disabled","true"),this._CartService.plusAndMinus(r,e).subscribe({next:i=>{this._Renderer2.removeAttribute(t,"disabled"),this.productCartData=i.data,this.toastr.success("The quantity has been changed."),this._CartService.cartNumber.next(i.numOfCartItems)},error:i=>{this._Renderer2.removeAttribute(t,"disabled")}})}clearCart(r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.clearUserCart().subscribe({next:e=>{this._Renderer2.removeAttribute(r,"disabled"),this.productCartData={},this.toastr.success(e.message),this._CartService.cartNumber.next(0)},error:e=>{this._Renderer2.removeAttribute(r,"disabled")}})}static \u0275fac=function(e){return new(e||c)(_(j),_(S),_(V))};static \u0275cmp=w({type:c,selectors:[["app-cart"]],decls:15,vars:9,consts:[["btnClear",""],["btnRemove",""],["btnMinus",""],["btnPlus",""],[1,"sec-cart","my-5","bg-white","p-4","rounded-4","position-relative"],[1,"jasper-color"],[1,"p-colo","my-3"],[1,"clear-all","main-btn",3,"click"],[1,"text-center","mt-5","jasper-color"],[1,"row","flex-column","flex-md-row","border-bottom","m-3"],[1,"main-btn","mb-2","mt-4","mx-3",3,"routerLink","disabled"],[1,"fa-brands","fa-cc-visa","ms-2"],[1,"col-md-3"],[1,"w-100","mw-100",3,"src","alt"],[1,"col-md-9","d-flex","justify-content-between","p-3"],[1,"details","d-flex","flex-column","justify-content-between"],[1,"p-colo"],[1,"remove","d-block",3,"click"],[1,"fa-solid","fa-trash"],[1,"count","d-flex","justify-content-center","align-items-center","gap-3"],[1,"icon-count",3,"click"],[1,"fa-solid","fa-minus"],[1,"fa-solid","fa-plus"]],template:function(e,t){if(e&1){let i=x();n(0,"section",4)(1,"h1",5),a(2,"shop Cart"),o(),n(3,"div",6),a(4),M(5,"currency"),o(),n(6,"button",7,0),C("click",function(){u(i);let l=b(7);return p(t.clearCart(l))}),a(8," Clear cart "),o(),k(9,B,2,0,"h1",8),R(10,N,23,5,"div",9,D),n(12,"button",10),a(13," proceed to buy "),m(14,"i",11),o()()}e&2&&(s(4),I(" total Price : ",P(5,4,t.productCartData.totalCartPrice,"EGP ")," "),s(5),y(!(t.productCartData==null||t.productCartData.products==null)&&t.productCartData.products.length?-1:9),s(),E(t.productCartData.products),s(2),h("routerLink",T(7,L,t.productCartData._id))("disabled",!(!(t.productCartData==null||t.productCartData.products==null)&&t.productCartData.products.length)))},dependencies:[O,A],styles:[".sec-cart[_ngcontent-%COMP%]{box-shadow:3px 2px 5px #0003}.clear-all[_ngcontent-%COMP%]{position:absolute;right:40px;top:50px}.remove[_ngcontent-%COMP%]{width:100px;color:#cb0d06;border:none;background-color:transparent}.remove[_ngcontent-%COMP%]:disabled{color:#e86661}.icon-count[_ngcontent-%COMP%]{color:#cb0d06;font-size:20px;border:none;background-color:transparent}.icon-count[_ngcontent-%COMP%]:disabled{color:#e86661}"]})};export{F as CartComponent};
