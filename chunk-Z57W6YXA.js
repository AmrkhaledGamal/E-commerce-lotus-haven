import{a as G}from"./chunk-PVPDB47X.js";import{a as b,b as p,c as R,d as q,f as y,g as T,h as P,i as N,k as A}from"./chunk-6RHAI3ON.js";import{f as F}from"./chunk-Q6M5HNXJ.js";import{Cb as m,Db as w,Oa as l,Pa as v,Xa as S,_ as x,bb as d,hb as E,lb as s,pb as r,qb as i,rb as u,wb as h,xb as c}from"./chunk-NO3ABJ5Q.js";function D(e,n){e&1&&(r(0,"p"),m(1,"name is required"),i())}function I(e,n){if(e&1&&(r(0,"div",5),d(1,D,2,0,"p"),i()),e&2){let o,t=c();l(),s((o=t.registerForm.get("name"))!=null&&o.getError("required")?1:-1)}}function M(e,n){e&1&&(r(0,"p"),m(1,"email is required"),i())}function V(e,n){e&1&&(r(0,"p"),m(1,"email InValid Format"),i())}function B(e,n){if(e&1&&(r(0,"div",5),d(1,M,2,0,"p")(2,V,2,0,"p"),i()),e&2){let o,t,a=c();l(),s((o=a.registerForm.get("email"))!=null&&o.getError("required")?1:-1),l(),s((t=a.registerForm.get("email"))!=null&&t.getError("email")?2:-1)}}function O(e,n){e&1&&(r(0,"p"),m(1,"password is required"),i())}function L(e,n){e&1&&(r(0,"p"),m(1,"must be at least 6 chars"),i())}function $(e,n){if(e&1&&(r(0,"div",5),d(1,O,2,0,"p")(2,L,2,0,"p"),i()),e&2){let o,t,a=c();l(),s((o=a.registerForm.get("password"))!=null&&o.getError("required")?1:-1),l(),s((t=a.registerForm.get("password"))!=null&&t.getError("pattern")?2:-1)}}function z(e,n){e&1&&(r(0,"p"),m(1,"confirm password is required"),i())}function U(e,n){e&1&&(r(0,"p"),m(1,"Password confirmation is incorrect"),i())}function Z(e,n){if(e&1&&(r(0,"div",5),d(1,z,2,0,"p")(2,U,2,0,"p"),i()),e&2){let o,t,a=c();l(),s((o=a.registerForm.get("rePassword"))!=null&&o.getError("required")?1:-1),l(),s((t=a.registerForm.get("rePassword"))!=null&&t.getError("notEqual")?2:-1)}}function k(e,n){e&1&&(r(0,"p"),m(1,"phone is required"),i())}function H(e,n){e&1&&(r(0,"p"),m(1,"accept only egypt phone numbers"),i())}function J(e,n){if(e&1&&(r(0,"div",5),d(1,k,2,0,"p")(2,H,2,0,"p"),i()),e&2){let o,t,a=c();l(),s((o=a.registerForm.get("phone"))!=null&&o.getError("required")?1:-1),l(),s((t=a.registerForm.get("phone"))!=null&&t.getError("pattern")?2:-1)}}function K(e,n){e&1&&u(0,"i",17)}var j=class e{constructor(n,o){this._AuthService=n;this._Router=o}masErr="";regSpinner=!1;formBuilder=x(N);registerForm=this.formBuilder.group({name:["",[p.required,p.minLength(3),p.maxLength(20)]],email:["",[p.required,p.email]],password:["",[p.required,p.pattern(/^[a-zA-Z0-9_@]{6,}$/)]],rePassword:[""],phone:["",[p.required,p.pattern(/^01[0125][0-9]{8}$/)]]},{validators:this.confirmPassword});confirmPassword(n){let o=n.get("password"),t=n.get("rePassword");t?.value==""?t.setErrors({required:!0}):t?.value!=o?.value&&t?.setErrors({notEqual:!0})}submitRegister(){this.regSpinner=!0,this.registerForm.valid&&this._AuthService.apiRegister(this.registerForm.value).subscribe({next:n=>{this.regSpinner=!1,this._Router.navigate(["/login"])},error:n=>{this.regSpinner=!1,this.masErr=n.error.message}})}static \u0275fac=function(o){return new(o||e)(v(G),v(F))};static \u0275cmp=S({type:e,selectors:[["app-register"]],decls:33,vars:9,consts:[[1,"d-flex","align-items-center","justify-content-center","my-5"],[1,"sign-up-form","p-4","w-50",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"errors"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],["for","rePassword",1,"form-label"],["type","password","id","rePassword","formControlName","rePassword",1,"form-control"],[1,"mb-4"],["for","phone",1,"form-label"],["type","tel","id","phone","formControlName","phone",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center","gap-1"],["type","submit",1,"main-btn",3,"disabled"],[1,"fas","fa-spinner","fa-spin","me-1"],[1,"message-err"]],template:function(o,t){if(o&1&&(r(0,"section",0)(1,"form",1),h("ngSubmit",function(){return t.submitRegister()}),r(2,"div",2)(3,"label",3),m(4,"User name"),i(),u(5,"input",4),d(6,I,2,1,"div",5),i(),r(7,"div",2)(8,"label",6),m(9,"Email address"),i(),u(10,"input",7),d(11,B,3,2,"div",5),i(),r(12,"div",2)(13,"label",8),m(14,"Password"),i(),u(15,"input",9),d(16,$,3,2,"div",5),i(),r(17,"div",2)(18,"label",10),m(19,"Confirm password"),i(),u(20,"input",11),d(21,Z,3,2,"div",5),i(),r(22,"div",12)(23,"label",13),m(24,"phone"),i(),u(25,"input",14),d(26,J,3,2,"div",5),i(),r(27,"div",15)(28,"button",16),d(29,K,1,0,"i",17),m(30," Submit "),i(),r(31,"div",18),m(32),i()()()()),o&2){let a,g,_,f,C;l(),E("formGroup",t.registerForm),l(5),s((a=t.registerForm.get("name"))!=null&&a.errors&&((a=t.registerForm.get("name"))!=null&&a.touched)?6:-1),l(5),s((g=t.registerForm.get("email"))!=null&&g.errors&&((g=t.registerForm.get("email"))!=null&&g.touched)?11:-1),l(5),s((_=t.registerForm.get("password"))!=null&&_.errors&&((_=t.registerForm.get("password"))!=null&&_.touched)?16:-1),l(5),s((f=t.registerForm.get("rePassword"))!=null&&f.errors&&((f=t.registerForm.get("rePassword"))!=null&&f.touched)?21:-1),l(5),s((C=t.registerForm.get("phone"))!=null&&C.errors&&((C=t.registerForm.get("phone"))!=null&&C.touched)?26:-1),l(2),E("disabled",!t.registerForm.valid),l(),s(t.regSpinner?29:-1),l(3),w(t.masErr)}},dependencies:[A,y,b,R,q,T,P],styles:["@media (max-width: 768px){.sign-up-form[_ngcontent-%COMP%]{width:75%!important}}"]})};export{j as RegisterComponent};
