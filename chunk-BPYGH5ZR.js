import{a as w}from"./chunk-54SZDUBV.js";import{a as b,b as p,c as x,d as y,f as F,g as E,h as N,i as T,k as q}from"./chunk-6RHAI3ON.js";import{d as S}from"./chunk-Q6M5HNXJ.js";import{Cb as m,Db as O,Oa as l,Pa as _,Xa as g,_ as v,bb as d,hb as C,lb as a,pb as r,qb as n,rb as u,wb as k,xb as h}from"./chunk-NO3ABJ5Q.js";function A(e,o){e&1&&(r(0,"p"),m(1,"details is required"),n())}function R(e,o){if(e&1&&(r(0,"div",5),d(1,A,2,0,"p"),n()),e&2){let t,i=h();l(),a((t=i.checkOutForm.get("details"))!=null&&t.getError("required")?1:-1)}}function j(e,o){e&1&&(r(0,"p"),m(1,"phone is required"),n())}function D(e,o){e&1&&(r(0,"p"),m(1,"accept only egypt phone numbers"),n())}function M(e,o){if(e&1&&(r(0,"div",5),d(1,j,2,0,"p")(2,D,2,0,"p"),n()),e&2){let t,i,c=h();l(),a((t=c.checkOutForm.get("phone"))!=null&&t.getError("required")?1:-1),l(),a((i=c.checkOutForm.get("phone"))!=null&&i.getError("pattern")?2:-1)}}function G(e,o){e&1&&(r(0,"p"),m(1,"city is required"),n())}function B(e,o){if(e&1&&(r(0,"div",5),d(1,G,2,0,"p"),n()),e&2){let t,i=h();l(),a((t=i.checkOutForm.get("city"))!=null&&t.getError("required")?1:-1)}}function P(e,o){e&1&&u(0,"i",12)}var I=class e{constructor(o,t){this._OrdersService=o;this._ActivatedRoute=t}idCart="";masErr="";regSpinner=!1;urlOrigin;formBuilder=v(T);checkOutForm=this.formBuilder.group({details:["",[p.required]],phone:["",[p.required,p.pattern(/^01[0125][0-9]{8}$/)]],city:["",[p.required]]});ngOnInit(){let o=window.location.origin;this.urlOrigin=o,this._ActivatedRoute.params.subscribe(t=>{this.idCart=t.id})}submitForm(){let o=this.checkOutForm.value;this.regSpinner=!0,this.checkOutForm.valid&&this._OrdersService.onlineOrders(this.idCart,o,this.urlOrigin).subscribe({next:t=>{this.regSpinner=!1,window.open(t.session.url,"_self")},error:t=>{this.regSpinner=!1,this.masErr=t.error.message}})}static \u0275fac=function(t){return new(t||e)(_(w),_(S))};static \u0275cmp=g({type:e,selectors:[["app-checkout"]],decls:23,vars:7,consts:[[1,"d-flex","justify-content-center","align-items-center","my-5"],[1,"checkout-form","p-4",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","details",1,"form-label"],["type","text","id","details","formControlName","details",1,"form-control"],[1,"errors"],["for","phone",1,"form-label"],["type","tel","id","phone","formControlName","phone",1,"form-control"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center","gap-1"],["type","submit",1,"main-btn",3,"disabled"],[1,"fas","fa-spinner","fa-spin","me-1"],[1,"message-err"]],template:function(t,i){if(t&1&&(r(0,"section",0)(1,"form",1),k("ngSubmit",function(){return i.submitForm()}),r(2,"div",2)(3,"label",3),m(4,"details"),n(),u(5,"input",4),d(6,R,2,1,"div",5),n(),r(7,"div",2)(8,"label",6),m(9,"phone"),n(),u(10,"input",7),d(11,M,3,2,"div",5),n(),r(12,"div",2)(13,"label",8),m(14,"city"),n(),u(15,"input",9),d(16,B,2,1,"div",5),n(),r(17,"div",10)(18,"button",11),d(19,P,1,0,"i",12),m(20," Submit "),n(),r(21,"div",13),m(22),n()()()()),t&2){let c,s,f;l(),C("formGroup",i.checkOutForm),l(5),a((c=i.checkOutForm.get("details"))!=null&&c.errors&&((c=i.checkOutForm.get("details"))!=null&&c.touched)?6:-1),l(5),a((s=i.checkOutForm.get("phone"))!=null&&s.errors&&((s=i.checkOutForm.get("phone"))!=null&&s.touched)?11:-1),l(5),a((f=i.checkOutForm.get("city"))!=null&&f.errors&&((f=i.checkOutForm.get("city"))!=null&&f.touched)?16:-1),l(2),C("disabled",i.checkOutForm.invalid),l(),a(i.regSpinner?19:-1),l(3),O(i.masErr)}},dependencies:[q,F,b,x,y,E,N],styles:[".checkout-form[_ngcontent-%COMP%]{width:60%}@media (max-width: 768px){.checkout-form[_ngcontent-%COMP%]{width:80%}}"]})};export{I as CheckoutComponent};
